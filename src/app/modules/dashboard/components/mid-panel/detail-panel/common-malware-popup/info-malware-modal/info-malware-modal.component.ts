import { ChangeDetectorRef, Component, inject, Input, OnInit, SimpleChanges } from '@angular/core';
import { CommonModule } from '@angular/common';
import { NgbActiveModal, NgbPaginationModule } from '@ng-bootstrap/ng-bootstrap';
import { SupabaseService } from 'src/app/modules/dashboard/services/supabase.service';
import { ConvertServiceComponent } from 'src/app/modules/dashboard/services/convert-service.component';

@Component({
  selector: 'app-info-malware-modal',
  standalone: true,
  imports: [
    CommonModule,
    NgbPaginationModule,
],
  templateUrl: './info-malware-modal.component.html',
  styleUrls: ['./info-malware-modal.component.scss'],
})
export class InfoMalwareModalComponent implements OnInit {

  page:any = 1;
  pageSize:any = 10;
  total =0;
  public dataSource: any[]=[];

  constructor(
    private supabase: SupabaseService,
    private convertService:ConvertServiceComponent,
    private cdr: ChangeDetectorRef,
  ) {}
  @Input() parent_id: number;
  @Input() detail: any;

  async ngOnInit() {
    let list = await this.supabase.detailMalwareTa21(this.parent_id);
    this.dataSource = list?.items;
    this.page = list?.page_index;
    this.pageSize = list?.page_size;
    this.total = list?.total;
  };
  async onPageChange(page: number) {
    this.page = page;
    let list = await this.supabase.detailMalwareTa21(this.parent_id,page);
    this.dataSource = list?.items;
    this.page = list?.page_index;
    this.pageSize = list?.page_size;
    this.total = list?.total;

  }
  public modal = inject(NgbActiveModal);
}
