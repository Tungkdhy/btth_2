<div class="d-flex flex-column gap-6">
  <div class="d-flex gap-6">
    <input class="btth-search-box" type="text" id="searchInput" [(ngModel)]="searchText" placeholder="Tìm kiếm" />
    <div class="d-flex align-items-center gap-3">
      <h4>Cấp độ</h4>
      <select class="btth-select-box" [(ngModel)]="capdoType">
        <option selected value="">Tất cả</option>
        <option value="1">Cấp độ 1</option>
        <option value="2">Cấp độ 2</option>
        <option value="3">Cấp độ 3</option>
        <option value="4">Cấp độ 4</option>
      </select>
    </div>
    <div class="d-flex align-items-center gap-3">
      <h4>Trạng thái</h4>
      <select class="btth-select-box" [(ngModel)]="pheDuyetType">
        <option selected value="">Tất cả</option>
        <option value="Đã phê duyệt">Đã phê duyệt</option>
        <option value="Chưa phê duyệt">Chưa phê duyệt</option>
      </select>
    </div>
    <div class="d-flex align-items-center gap-3">
      <button class="btth-btn active" (click)="search()">Tìm kiếm</button>
      <button class="btth-btn btn-border" (click)="exportExcel()">Xuất excel</button>
    </div>
  </div>
  <div>
    <table class="btth-top-table table-detail-phe-duyet table-popup-detail h-100">
      <thead>
        <tr>
          <th>STT</th>
          <th>Tên hệ thống</th>
          <th>Đơn vị</th>
          <th>Cấp độ</th>
          <th>Thời gian</th>
          <th>Trạng thái</th>
          <th>Loại mạng, quản lý</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="dataSource?.length === 0">
          <td colspan="7" class="text-center">Không có dữ liệu</td>
        </tr>
        <tr *ngFor="let item of dataSource; let index = index">
          <td>
            <p style="font-weight: 700;">{{ (page - 1) * pageSize + index + 1 }}</p>
          </td>
          <td>
            <p>
              {{ item?.data?.ten }}
            </p>
          </td>
          <td>
            <p>{{ item?.data?.uname?.split("\n")[0] || "" }}</p>
            <p class="td-sub-title">
              {{
              item?.data?.uname?.split("\n")[1]
              }}
            </p>
          </td>
          <td>
            <p>Cấp độ {{ item?.data?.capdo }}</p>
          </td>
          <td>
            <p>
              {{ item?.data?.created_at | date: "dd-MM-yyyy" }}
            </p>
            <p class="td-sub-title">
              {{ item?.data?.created_at | date: "HH:mm:ss" }}
            </p>
          </td>
          <td>
            <span
              [ngClass]="item?.data?.fe_duyet === 'Chưa phê duyệt' ? 'status status-orange' : 'status status-green'">
              {{ item?.data?.fe_duyet }}
            </span>
          </td>
          <td>
            <p>{{ getTypeNetwork(item?.data?.main_type) }}</p>
            <p class="td-sub-title">
              {{ getNameRegion(item?.data?.loi) }}
            </p>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="d-flex justify-content-between">
    <h4>Tổng số: {{total | numberFormat}}</h4>
    <ngb-pagination [collectionSize]="total" [maxSize]="5" [(page)]="page" [pageSize]="pageSize"
      (pageChange)="onPageChange($event)" class="btth-pagination">
    </ngb-pagination>
  </div>
</div>